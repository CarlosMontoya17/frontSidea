<app-sidebar></app-sidebar>

<div class="container">
    <button type="button" class="conteo" (click)="changeView()">Conteo</button>
    <!-- conteogeneral -->
    <div class="table-responsive" *ngIf="conteo">
        <div class="card text-center"
            style="background: rgb(255,255,255); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
            #screen>
            <div class="card-body">
                <h4> &bull;Conteo&bull;</h4>
                <h4>&mdash;&mdash;</h4>
                <!-- <h5 class="card-title" style="text-transform: uppercase;">{{ CiberSelect }}</h5> -->
                <div class="d-flex justify-content-center">
                    <div class="table table-striped">
                        <thead class="myheaders">
                            <tr style="border-radius: 1rem !important; ">

                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                    nacimiento</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                    Defunción</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                    Matrimonio</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                    Divorcio</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Semanas
                                    cotizadas</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">NSS</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">RFC</th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Constacia
                                    de
                                    derechos
                                </th>
                                <th scope="col" style="background-color:rgba(150,150,253,90%); color: #000;">Constacia
                                    de
                                    Inhabilitación
                                </th>
                                <th scope="col"
                                    style="background-color:rgba(150,150,253,90%);  color: #000; width: 8rem; ">
                                    Total de actas</th>
                            </tr>
                        </thead>
                        
                        <tbody>
                            <tr style="cursor: pointer;">
                                <td style=" color: #000; font-size:1.2em; ">{{conteo_nacimiento}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_defuncion}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_matrimonio}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_divorcio}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_cot}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_nss}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_rfc}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_der}} </td>
                                <td style=" color: #000; font-size:1.2em;">{{conteo_inh}} </td>
                                <td style=" background-color: #f2b0e0; color: #000; font-size:1.2em;">
                                    {{conteo_total}} </td>
                            </tr>
                        </tbody>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- findetabla -->
    <div class="card">
        <div class="card-body text-center">
            <h5>&bull;PAGOS&bull;</h5>
        </div>
    </div>

</div>

<div class="contenedor">
    <div class="row">
        <div class="col col-4" style="border-radius: 0.25rem; background-color: rgb(58, 56, 56); width: 25rem;">
            <div class="input-group" style="margin-top: 1em;">
                <input type="text" class="form-control" placeholder="Buscar" [(ngModel)]="ciberSearch"
                    name="ciberSearch">
            </div>
            <ul class="list-group" style="margin-top: 1rem; margin-bottom: 1rem;">
                <li class="list-group-item active" aria-current="true"
                    style="text-align: center; background: linear-gradient(0, rgb(36, 133, 163) 0%, rgba(34,165,223,1) 100%); ">
                    CIBERS</li>
                <ol class="list-group list-group-numbered">
                    <li class="list-group-item d-flex justify-content-between align-items-start"
                        style="cursor: pointer;" *ngFor="let ciber of rowData |  buscarciber: ciberSearch">
                        <div class="ms-2 me-auto">
                            <button class="button phone" (click)="getCorte(ciber.id, ciber.nombre)"
                                *ngIf="CiberSelect!=ciber.nombre">{{ ciber.nombre }}</button>
                            <button class="select" *ngIf="CiberSelect===ciber.nombre">{{ ciber.nombre }}</button>
                        </div>
                    </li>
                </ol>
            </ul>
        </div>
        <div class="col col-8 text-center">
            <div class="card">
                <div class="card-body">
                    <h4>&bull;Selecciona la fecha de corte&bull;</h4>
                    <h4>&mdash;&mdash;</h4>
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" href="#" style="background-color: rgb(0, 0, 0);"
                            role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                            {{ corteSeleccionado }}
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">

                            <li *ngFor="let fecha of fechas; let indexof = index" style="cursor: pointer;">
                                <a class="dropdown-item" (click)="setCorte(fechas[indexof].corte)">{{
                                    fechas[indexof].corte}}</a>
                            </li>
                            <li style="cursor: pointer;">
                                <a class="dropdown-item" (click)="setCorte('Actual')">Actual</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="excel-table" class="card text-center"
                style="background: rgb(255,255,255); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
                #screen>
                <div class="card-body">
                    <h5 class="card-title" style="text-transform: uppercase; background-color: #98f6a9;">{{ CiberSelect
                        }}</h5>
                    <div class="d-flex justify-content-center">
                        <div class="table table-striped table-responsive">
                            <thead class="myheaders">
                                <tr style="border-radius: 1rem !important;">
                                    <th scope="col" style="width: 3em !important; border-radius: 0.5rem 0 0 0.5rem;">#
                                    </th>
                                    <th scope="col" style="width: 8em !important;">Documento</th>
                                    <th scope="col" style="width: 5em !important;">Fecha</th>
                                    <th scope="col" style="width: 8em !important;">Estado</th>
                                    <th scope="col" style="width: 15em !important;">Nombre (Acta)</th>
                                    <th scope="col" style="width: 9em !important;">CURP</th>
                                    <th scope="col" style="width: 3em !important; border-radius: 0 0.5rem 0.5rem 0;">
                                        Precio</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let acta of Corte; let infexof = index;" style="cursor: pointer;">
                                    <th scope="row" style="width: 3em !important;">{{ infexof + 1 }}</th>
                                    <td style=" font-size:1.0em;">{{ acta.document }}</td>
                                    <td style=" font-size:1.0em;">{{ acta.createdAt | date:'yyyy-MM-dd' }} </td>
                                    <td style=" font-size:1.0em;">{{ acta.states }} </td>
                                    <td style=" font-size:1.0em;"> {{ acta.nombreacta }}</td>
                                    <td style=" font-size:1.0em;"> {{ acta.curp }}</td>
                                    <td style=" font-size:1.0em;">$ {{ acta.price }} </td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td> </td>
                                    <td> </td>
                                    <td> </td>
                                    <td> </td>
                                    <td> </td>
                                    <th>
                                        Total:
                                    </th>
                                    <td style=" font-size:1.2em; background-color: #f2b0e0;">${{TotalCorte}}</td>
                                </tr>
                            </tbody>
                        </div>
                    </div>
                </div>
                <!-- Conteo -->
                <div class="table-responsive">
                    <div class="card text-center"
                        style="background: rgb(255,255,255); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
                        #screen>
                        <div class="card-body">
                            <h4> &bull;Conteo&bull;</h4>
                            <h4>&mdash;&mdash;</h4>
                            <!-- <h5 class="card-title" style="text-transform: uppercase;">{{ CiberSelect }}</h5> -->
                            <div class="d-flex justify-content-center">
                                <div class="table table-striped">
                                    <thead class="myheaders">
                                        <tr style="border-radius: 1rem !important; ">

                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Acta de
                                                nacimiento</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Acta de
                                                Defunción</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Acta de
                                                Matrimonio</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Acta de
                                                Divorcio</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Semanas
                                                cotizadas</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">NSS</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">RFC</th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Constacia
                                                de
                                                derechos
                                            </th>

                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000;">Constacia
                                                de
                                                Inhabilitación
                                            </th>
                                            <th scope="col"
                                                style="background-color:rgba(152,246,169,90%); color: #000; width: 8rem; ">
                                                Total de actas</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="cursor: pointer;">
                                            <td style=" color: #000; font-size:1.2em; ">{{conteo_nacimiento}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_defuncion}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_matrimonio}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_divorcio}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_cot}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_nss}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_rfc}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_der}} </td>
                                            <td style=" color: #000; font-size:1.2em;">{{conteo_inh}} </td>
                                            <td style=" background-color: #f2b0e0; color: #000; font-size:1.2em;">
                                                {{conteo_total}} </td>
                                        </tr>
                                    </tbody>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <span class="btn btn-success" (click)="downloadCorte()">Descargar PNG</span>
            <button class="btn btn-success" (click)="exportexcel()">Descargar Excel</button>
        </div>
    </div>
    <div id="download">
        <img #canvas>
        <a #downloadLink></a>
    </div>
</div>